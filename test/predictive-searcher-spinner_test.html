<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

  <title>predictive-searcher-spinner test</title>

  <script src="../bower_components/webcomponentsjs/webcomponents-loader.js"></script>
  <script src="../bower_components/web-component-tester/browser.js"></script>

  <link rel="import" href="../components/predictive-searcher-spinner.html">
</head>

<body>

  <test-fixture id="SpinnerTestFixture">
    <template>
      <predictive-searcher-spinner></predictive-searcher-spinner>
    </template>
  </test-fixture>

  <script>
    suite('predictive-searcher-spinner', () => {

      //Dependencies
      test('Should have all required components', function () {
        const component = fixture('SpinnerTestFixture');
        const field = component.shadowRoot.querySelector('paper-spinner-lite');
        assert(field, 'field is neither `null` nor `undefined`');
      });

      //Properties
      test('Error property should be a Boolean', function () {
        let component = fixture('SpinnerTestFixture');
        assert.typeOf(component.error, 'boolean');
      });

      test('Active property should be a Boolean', function () {
        let component = fixture('SpinnerTestFixture');
        assert.typeOf(component.active, 'boolean');
      });

      //Funcionality
      test('Change Error property should add error class to the subcomponent', function (done) {
        const component = fixture('SpinnerTestFixture');
        component.error = true;
        flush(function () {
          const field = component.shadowRoot.querySelector('paper-spinner-lite');
          assert.isTrue(field.classList.contains('error'));
          done();
        });
      });

      test('Change Active property should assign its active attibute to true', function (done) {
        const component = fixture('SpinnerTestFixture');
        component.active = true;
        flush(function () {
          const field = component.shadowRoot.querySelector('paper-spinner-lite');
          assert.isTrue(field.active);
          done();
        });
      });

    });
  </script>

</body>

</html>